(function(t){function e(e){for(var n,l,c=e[0],o=e[1],r=e[2],u=0,f=[];u<c.length;u++)l=c[u],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&f.push(s[l][0]),s[l]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);d&&d(e);while(f.length)f.shift()();return i.push.apply(i,r||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,c=1;c<a.length;c++){var o=a[c];0!==s[o]&&(n=!1)}n&&(i.splice(e--,1),t=l(l.s=a[0]))}return t}var n={},s={app:0},i=[];function l(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=n,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(a,n,function(e){return t[e]}.bind(null,n));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var r=0;r<c.length;r++)e(c[r]);var d=o;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},1130:function(t,e,a){"use strict";a("74ae")},"34e2":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e623"),a("e379"),a("5dc8"),a("37e1");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.connectState?t._e():a("div",[a("el-button",{attrs:{type:"text"},on:{click:t.init}},[t._v("connect")])],1),t.connectState?a("div",[t._v(" "+t._s(t.ip)),a("i",{staticClass:"el-icon-check",staticStyle:{color:"#67C23A"}},[t._v("已连接")])]):t._e(),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"频道测试",name:"channel"}},[a("channel",{ref:"channel",attrs:{send:t.send,ab2str:t.ab2str,handleClick:t.handleClick,socketObj:t.socket}})],1),a("el-tab-pane",{attrs:{label:"参数配置",name:"config"}},[a("config",{ref:"config",attrs:{send:t.send,ab2str:t.ab2str,handleClick:t.handleClick}})],1),a("el-tab-pane",{attrs:{label:"频响设置",name:"frf"}},[a("frf",{ref:"frf",attrs:{send:t.send,ab2str:t.ab2str,socketObj:t.socket}})],1)],1)],1)},i=[],l=(a("b0c0"),a("99af"),a("c19f"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{on:{click:t.sendCmd}},[t._v("开始测试")]),a("el-row",t._l(t.list,(function(e,n){return a("el-col",{key:n,staticClass:"card-item",attrs:{span:10}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"item.loading"}],staticClass:"box-card card-margin"},[a("el-descriptions",{attrs:{title:"通道"+(n+1),column:1}},[a("el-descriptions-item",{attrs:{label:"电流值"}},[t._v(t._s(e.get))]),a("el-descriptions-item",{attrs:{label:"偏压值"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.input,callback:function(a){t.$set(e,"input",a)},expression:"item.input"}})],1)],1)],1)],1)})),1)],1)}),c=[],o=(a("fb6a"),{name:"channel",props:{send:{type:Function,default:null},str2ab:{type:Function,default:null},ab2str:{type:Function,default:null},handleClick:{type:Function,default:null},socketObj:{default:null}},data:function(){return{list:[{get:null,input:0,loading:!1},{get:null,input:0,loading:!1},{get:null,input:0,loading:!1},{get:null,input:0,loading:!1}],resList:[{Pd:0,flag:1,Val:1.2},{Pd:1,flag:0,Val:3},{Pd:2,flag:1,Val:1.3},{Pd:3,flag:1,Val:1.4}],testObj:{num:0},testDisable:!1}},methods:{sendTest:function(){var t=this;this.testDisable=!0,this.list[this.testObj.num].loading=!0,setTimeout((function(){t.list[t.testObj.num].get=10*Math.random(),t.list[t.testObj.num].loading=!1,t.testDisable=!1,3===t.testObj.num?t.testObj.num=0:t.testObj.num++}),500)},sendCmd:function(){this.list[0].input||this.list[1].input||this.list[2].input||this.list[3].input?(console.log("COMMon:TemDEVice:SET:PDMeasure:{Pd0Bias:".concat(this.list[0].input,",Pd1Bias:").concat(this.list[1].input,",Pd2Bias:").concat(this.list[2].input,",Pd3Bias:").concat(this.list[3].input,"}")),this.send("COMMon:TemDEVice:SET:PDMeasure:{Pd0Bias:".concat(this.list[0].input,",Pd1Bias:").concat(this.list[1].input,",Pd2Bias:").concat(this.list[2].input,",Pd3Bias:").concat(this.list[3].input,"}")),this.list[0].loading=!0):this.$notify({title:"警告",message:"输入数值",position:"top-left",type:"warning"})},getMessage:function(t){var e=this;console.log(t);var a=new FileReader;a.readAsArrayBuffer(t.data),a.onloadend=function(t){console.log(e.ab2str(t.target.result));var a=e.ab2str(t.target.result);if(a.indexOf("PDMeasure")>0){var n=a.slice(a.indexOf("{"),a.length);console.log(n);var s=JSON.parse(n);console.log(s),e.list[s.Pd].get=s.Val,e.list[s.Pd].loading=!1,s.Pd<4&&(e.list[s.Pd+1].loading=!0)}e.$notify.info({title:"返回结果",message:e.ab2str(t.target.result)})}}},mounted:function(){console.log("cc"),this.socketObj.onmessage=this.getMessage}}),r=o,d=(a("1130"),a("2877")),u=Object(d["a"])(r,l,c,!1,null,"c4730118",null),f=u.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"card-item",attrs:{span:10}},[a("el-card",{staticClass:"box-card card-margin"},[a("el-descriptions",{attrs:{title:"AD5322",column:1}},[a("el-descriptions-item",{attrs:{label:"AD5322_DAC"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.AD,callback:function(e){t.AD=e},expression:"AD"}})],1)],1),a("div",{staticClass:"bottom clearfix"},[a("el-button",{staticClass:"button",staticStyle:{float:"right"},attrs:{"data-id":"ad",type:"text"},on:{click:t.sendCmd}},[t._v("设置")])],1),a("el-alert",{attrs:{title:"AD5322_DAC= 0-4096",type:"info",closable:!1,"show-icon":""}})],1),a("el-card",{staticClass:"box-card card-margin"},[a("el-descriptions",{attrs:{title:"HC595",column:1}},[a("el-descriptions-item",{attrs:{label:"index"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.HC.index,callback:function(e){t.$set(t.HC,"index",e)},expression:"HC.index"}})],1),a("el-descriptions-item",{attrs:{label:"chanel"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.HC.channel,callback:function(e){t.$set(t.HC,"channel",e)},expression:"HC.channel"}})],1),a("el-descriptions-item",{attrs:{label:"data "}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.HC.data,callback:function(e){t.$set(t.HC,"data",e)},expression:"HC.data"}})],1)],1),a("div",{staticClass:"bottom clearfix"},[a("el-button",{staticClass:"button",staticStyle:{float:"right"},attrs:{"data-id":"hc",type:"text"},on:{click:t.sendCmd}},[t._v("设置")])],1),a("el-alert",{attrs:{title:"\n          Index = 0,1,2,3 \t\n          (0:hc595_12, 1:hc595_34, 2:hc595_56, 3:hc595_78)\n          Channel = 0-15\t(PD0,…,PD15)\n          Data = 0,1\t\t(0:off, 1:on)",type:"info",closable:!1,"show-icon":""}})],1)],1),a("el-col",{staticClass:"card-item",attrs:{span:10}},[a("el-card",{staticClass:"box-card card-margin"},[a("el-descriptions",{attrs:{title:"PD通道",column:1}},[a("el-descriptions-item",{attrs:{label:"num"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.PD1.num,callback:function(e){t.$set(t.PD1,"num",e)},expression:"PD1.num"}})],1),a("el-descriptions-item",{attrs:{label:"sw1"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.PD1.sw1,callback:function(e){t.$set(t.PD1,"sw1",e)},expression:"PD1.sw1"}})],1),a("el-descriptions-item",{attrs:{label:"sw2"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.PD1.sw2,callback:function(e){t.$set(t.PD1,"sw2",e)},expression:"PD1.sw2"}})],1),a("el-descriptions-item",{attrs:{label:"amp"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.PD1.amp,callback:function(e){t.$set(t.PD1,"amp",e)},expression:"PD1.amp"}})],1),a("el-descriptions-item",{attrs:{label:"bias"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.PD1.bias,callback:function(e){t.$set(t.PD1,"bias",e)},expression:"PD1.bias"}})],1)],1),a("div",{staticClass:"bottom clearfix"},[a("el-button",{staticClass:"button",staticStyle:{float:"right"},attrs:{"data-id":"pd1",type:"text"},on:{click:t.sendCmd}},[t._v("设置")])],1),a("el-alert",{attrs:{title:"Num=0-15\nSw1,sw2,amp,bias = 0,1\t\t(0:off, 1:on)",type:"info",closable:!1,"show-icon":""}})],1),a("el-card",{staticClass:"box-card card-margin"},[a("el-descriptions",{attrs:{title:"PD各通道采样值",column:1}},[a("el-descriptions-item",{attrs:{label:"采样值"}},[t._v(t._s(t.PD2.val))]),a("el-descriptions-item",{attrs:{label:"num"}},[a("el-input",{attrs:{placeholder:"请输入内0-15"},model:{value:t.PD2.Id,callback:function(e){t.$set(t.PD2,"Id",e)},expression:"PD2.Id"}})],1)],1),a("div",{staticClass:"bottom clearfix"},[a("el-button",{staticClass:"button",staticStyle:{float:"right"},attrs:{"data-id":"pd2",type:"text"},on:{click:t.sendCmd}},[t._v("设置")])],1),a("el-alert",{attrs:{title:"Num=0-15",type:"info",closable:!1,"show-icon":""}})],1)],1)],1)],1)},h=[],b={name:"config",props:{send:{type:Function,default:null},ab2str:{type:Function,default:null}},data:function(){return{AD:123,HC:{index:1,channel:1,data:1},PD1:{num:0,sw1:0,sw2:0,amp:0,bias:0},PD2:{Id:1,val:0}}},methods:{sendCmd:function(t){switch(t.currentTarget.dataset.id){case"ad":this.send("COMMon:TemDEVice:SET:AD5322_DAC="+this.AD);break;case"hc":this.send("COMMon:TemDEVice:SET:HC595:{index: ".concat(this.HC.index,",channel:").concat(this.HC.channel,",data: ").concat(this.HC.data,"}"));break;case"pd1":console.log("COMMon:TemDEVice:SET:PDChannel:{num:".concat(this.PD1.num,",sw1:").concat(this.PD1.sw1,",sw2:").concat(this.PD1.sw2,",amp:").concat(this.PD1.amp,",bias:").concat(this.PD1.bias,"}")),this.send("COMMon:TemDEVice:SET:PDChannel:{num:".concat(this.PD1.num,",sw1:").concat(this.PD1.sw1,",sw2:").concat(this.PD1.sw2,",amp:").concat(this.PD1.amp,",bias:").concat(this.PD1.bias,"}"));break;case"pd2":console.log("COMMon:TemDEVice:GET:PDValve:{num:".concat(this.PD2,"}")),this.send("COMMon:TemDEVice:GET:PDValve:{num:".concat(this.PD2.Id,"}"));break;default:break}console.log(t.currentTarget.dataset.id)},getMessage:function(t){var e=this,a=new FileReader;a.readAsArrayBuffer(t.data),a.onloadend=function(t){console.log(e.ab2str(t.target.result)),e.$notify.info({title:"返回结果",position:"top-left",message:e.ab2str(t.target.result)});var a=e.ab2str(t.target.result);if(a.indexOf("PDValue")>0){var n=a.slice(a.indexOf("=")+1,a.length-2);e.PD2.val=n}}}},mounted:function(){}},m=b,g=(a("75e1"),Object(d["a"])(m,p,h,!1,null,"68b0dc46",null)),v=g.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card card-margin"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("频响设置")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.save}},[t._v("保存")])],1),a("div",{staticClass:"demo-input-suffix"},[a("span",{staticClass:"title-span"},[t._v("通道值：")]),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.frf.Id,callback:function(e){t.$set(t.frf,"Id",e)},expression:"frf.Id"}})],1),a("div",{staticClass:"demo-input-suffix"},[a("span",{staticClass:"title-span"},[t._v("段值：")]),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.frf.Segment,callback:function(e){t.$set(t.frf,"Segment",e)},expression:"frf.Segment"}})],1),a("div",{staticClass:"demo-input-suffix"},[a("span",{staticClass:"title-span"},[t._v("点值：")]),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.frf.Point,callback:function(e){t.$set(t.frf,"Point",e)},expression:"frf.Point"}})],1),a("div",{staticClass:"demo-input-suffix"},[a("span",{staticClass:"title-span"},[t._v("校准值：")]),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.frf.CorrectVal,callback:function(e){t.$set(t.frf,"CorrectVal",e)},expression:"frf.CorrectVal"}})],1),a("div",{staticClass:"demo-input-suffix"},[a("el-switch",{attrs:{"active-text":"按用户设置","inactive-text":"不按照用户设置"},model:{value:t.frf.Flag,callback:function(e){t.$set(t.frf,"Flag",e)},expression:"frf.Flag"}})],1),a("div",{staticClass:"bottom clearfix"},[t._v(" 电压(mV):"+t._s(t.frf.v)+" 电流(nA): "+t._s(t.frf.a)+"校准电流(nA): "+t._s(t.frf._a)+" "),a("el-button",{staticClass:"button",staticStyle:{float:"right"},attrs:{type:"text"},on:{click:t.measure}},[t._v("设置")])],1),a("el-alert",{attrs:{title:"通道值：0,1,2,3 \n段值: 0,1,2,3,4,5,6,7，\n点值: 0,1,\n偏压设置: 0.0-100.0,\n校准值: (nA)，\n是否使用用户设置:0,1 0：否，1：是",type:"info",closable:!1,"show-icon":""}})],1),a("el-card",{staticClass:"box-card card-margin"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("偏差校准设置")])]),a("div",{staticClass:"demo-input-suffix"},[a("span",{staticClass:"title-span"},[t._v("通道值：")]),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.cail.Id,callback:function(e){t.$set(t.cail,"Id",e)},expression:"cail.Id"}})],1),a("div",{staticClass:"demo-input-suffix"},[a("span",{staticClass:"title-span"},[t._v("校准值：")]),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.cail.CaliVal,callback:function(e){t.$set(t.cail,"CaliVal",e)},expression:"cail.CaliVal"}})],1),a("div",{staticClass:"bottom clearfix"},[t._v(" 电压(mV):"+t._s(t.cail.v)+" 电流(nA): "+t._s(t.cail.a)+" "),a("el-button",{staticClass:"button",staticStyle:{float:"right"},attrs:{type:"text"},on:{click:t.setCail}},[t._v("设置")])],1),a("el-alert",{attrs:{title:"通道数:0,1,2,3,校准值:1.0",type:"info",closable:!1,"show-icon":""}})],1),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:t.getAx}},[t._v("获取axbx")]),t._l(t.objs,(function(e,n){return a("div",{key:n},[a("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(n))]),a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容",value:JSON.stringify(e)}})],1)}))],2)},x=[],D={props:{send:{type:Function,default:null},ab2str:{type:Function,default:null},socketObj:{default:null}},data:function(){return{objs:{},frf:{Id:1,Segment:1,Point:1,CorrectVal:1,Flag:!0,v:"",a:"",_a:""},cail:{Id:1,CaliVal:1,v:"",a:""},axbx:""}},methods:{save:function(){this.send("COMMon:TemDEVice:SET:PDCorrectValSave")},measure:function(){this.send("COMMon:TemDEVice:SET:PDCorrectVal:{Id:".concat(this.frf.Id,",Segment:").concat(this.frf.Segment,",Point:").concat(this.frf.Point,",CorrectVal:").concat(this.frf.CorrectVal,",flag:").concat(this.frf.Flag?1:0,"}")),console.log()},setCail:function(){this.send("COMMon:TemDEVice:SET:PDCalibration:{Id:".concat(this.cail.Id,",CaliVal:").concat(this.cail.CaliVal,"}")),console.log("COMMon:TemDEVice:SET:PDCalibration:{Id:".concat(this.cail.Id,",CaliVal:").concat(this.cail.CaliVal,"}"))},getAx:function(){this.socketObj.onmessage=this.getAxMsg,this.send("COMMon:TemDEVice:GET:AxBx")},getMessage:function(t){var e=this,a=new FileReader;a.readAsArrayBuffer(t.data),a.onloadend=function(t){console.log(e.ab2str(t.target.result)),e.$notify.info({title:"返回结果",position:"top-left",message:e.ab2str(t.target.result)});var a=e.ab2str(t.target.result);if(a.indexOf("PDCorrectVal")>0||a.indexOf("PDMCalibration")>0){var n=a.slice(a.indexOf("{"),a.length-2),s=JSON.parse(n);a.indexOf("PDCorrectVal")>0?(e.frf.v=s.Vol,e.frf.a=s.Cur,e.frf._a=s.CorrectI):(e.cail.v=s.Vol,e.cail.a=s.Cur)}}},getAxMsg:function(t){var e=this,a=new FileReader;a.readAsArrayBuffer(t.data),a.onloadend=function(t){console.log(e.ab2str(t.target.result)),e.$notify.info({title:"返回结果",position:"top-left",message:e.ab2str(t.target.result)});var a=e.ab2str(t.target.result);if(a.indexOf("COMMon:TemDEVice:GET:AxBx")>0){var n=a.slice(a.indexOf("AxBx:")+5,a.length);e.axbx=n}else if("END\r\n"==a.slice(a.length-5,a.length)){e.socketObj.onmessage=e.getMessage;var s=e.axbx.slice(e.axbx.indexOf("{"),e.axbx.length),i=JSON.parse(s);return void(e.objs=i)}e.axbx+=a}}}},P=D,y=(a("9128"),Object(d["a"])(P,C,x,!1,null,null,null)),k=y.exports,_={name:"app",data:function(){return{activeName:"channel",agentPath:"192.168.77.47:8888/Agent",ip:"192.168.77.242",socket:{},connectState:!1}},methods:{handleClick:function(t){switch(console.log(t.name),t.name){case"channel":console.log(this.$refs.channel.getMessage),this.socket.onmessage=this.$refs.channel.getMessage;break;case"config":this.socket.onmessage=this.$refs.config.getMessage;break;case"frf":this.socket.onmessage=this.$refs.frf.getMessage;break;default:break}},init:function(){""!=this.ip?"undefined"===typeof WebSocket?alert("您的浏览器不支持socket"):(this.socket=new WebSocket("ws://".concat(this.agentPath,"?Target=").concat(this.ip,":9000&encoding=binary")),this.socket.onopen=this.open,this.socket.onerror=this.error,this.socket.onmessage=this.$refs.channel.getMessage):this.$notify({title:"警告",message:"输入连接ip",position:"top-left",type:"warning"})},open:function(){this.connectState=!0,this.send("#18,71044_44"),console.log("socket连接成功")},error:function(){console.log("连接错误")},getMessage:function(t){var e=this,a=new FileReader;a.readAsArrayBuffer(t.data),a.onloadend=function(t){console.log(e.ab2str(t.target.result))},console.log(t)},send:function(t){this.socket.send(this.str2ab(t+"/r/n"))},close:function(){this.connectState=!1,console.log("socket已经关闭")},str2ab:function(t){t+="\r\n";for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),n=0,s=t.length;n<s;n++)a[n]=t.charCodeAt(n);return e},ab2str:function(t){var e=new Uint8Array(t),a=String.fromCharCode.apply(null,e),n=decodeURIComponent(escape(a));return n}},mounted:function(){},components:{channel:f,config:v,frf:k}},w=_,O=(a("034f"),Object(d["a"])(w,s,i,!1,null,null,null)),M=O.exports,S=a("5c96"),V=a.n(S);a("0fae");n["default"].use(V.a),n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(M)}}).$mount("#app")},"74ae":function(t,e,a){},"75e1":function(t,e,a){"use strict";a("34e2")},"85ec":function(t,e,a){},9128:function(t,e,a){"use strict";a("e207")},e207:function(t,e,a){}});
//# sourceMappingURL=app.7c45cc3e.js.map